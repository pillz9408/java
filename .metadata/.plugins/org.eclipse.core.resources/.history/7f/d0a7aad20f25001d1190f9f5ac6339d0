package thebrains.pim.service;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.List;

import thebrains.pim.controller.MemberController;
import thebrains.pim.model.Member;

public class MemberServiceImpl<T> implements MemberService<T> { //데이터 DB를 가져와서 가공하거나 , 가공한 결과를 DB에 저장 요청
	//MemberRepository memberRepositary = null;// DB 또는 File 입출력을 담당
	private String memberdb = MemberController.MEMBER_DB;
	
	public MemberServiceImpl() {
		// memberRepository = new MemberRepositoryImpl<T>():
		//memberdb = memberDB;	
	}
	@Override
	public T login(String email, String pw) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public void logout() {
		// TODO Auto-generated method stub

	}

	@Override
	public int postMember(T member) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public T getMember(T member) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public List<T> getMemberList() {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public int putMember(T member) {
		// TODO Auto-generated method stub
		return 0;
	}

	@Override
	public int deleteMember(T member) {
		// TODO Auto-generated method stub
		return 0;
	}

		@Override
	public void readFile() {
		 File file = new File(memberdb); // 파일 객체를 생성
	        if (file.canRead()) { // 존재하여서 읽을 수 있는 상태
	            try {
	                MemberFileReader<Member> mfr = new MemberFileReader<Member>(file);
	                //memberRepository.setMemberList((List<T>) mfr.readMember());
	                for(Member m : mfr.readMember()) {
	                	System.out.println(m.getMno());
	                	System.out.println(m.getEmail());
	                	System.out.println(m.getName());
	                }
	            } catch (FileNotFoundException e) {
	                e.printStackTrace();
	            }
	        } else { // 읽을 수 없는 상태
	            try {
	                file.createNewFile();
	            } catch (IOException e) {
	                e.printStackTrace();
	            }
	        }

	}

	@Override
	public void saveFile() {
		// member list를 파일로 저장
        File file = new File(memberdb);
        try {
            MemberFileWriter<Member> mfw = new MemberFileWriter<Member>(file);
           // mfw.saveMember((List<Member>) memberRepository.readList());
        } catch (IOException e) {
            e.printStackTrace();
        }

	}

	@Override
	public void applyUpdate() {
		// TODO Auto-generated method stub

	}

}
